!function(v){v.fn.jdMarquee=function(n,t){"function"==typeof n&&(t=n,n={});var o,c=v.extend({deriction:"up",speed:10,auto:!1,width:null,height:null,step:1,control:!1,_front:null,_back:null,_stop:null,_continue:null,wrapstyle:"",stay:5e3,delay:20,dom:"div>ul>li".split(">"),mainTimer:null,subTimer:null,tag:!1,convert:!1,btn:null,disabled:"disabled",pos:{ojbect:null,clone:null}},n||{}),r=this.find(c.dom[1]),i=this.find(c.dom[2]);if("up"==c.deriction||"down"==c.deriction){var a=r.eq(0).outerHeight(),s=c.step*i.eq(0).outerHeight();r.css({width:c.width+"px",overflow:"hidden"})}if("left"==c.deriction||"right"==c.deriction){var l=i.length*i.eq(0).outerWidth();r.css({width:l+"px",overflow:"hidden"});s=c.step*i.eq(0).outerWidth()}function e(){var n="<div style='position:relative;overflow:hidden;z-index:1;width:"+c.width+"px;height:"+c.height+"px;"+c.wrapstyle+"'></div>";switch(r.css({position:"absolute",left:0,top:0}).wrap(n),c.pos.object=0,o=r.clone(),r.after(o),c.deriction){default:case"up":r.css({marginLeft:0,marginTop:0}),o.css({marginLeft:0,marginTop:a+"px"}),c.pos.clone=a;break;case"down":r.css({marginLeft:0,marginTop:0}),o.css({marginLeft:0,marginTop:-a+"px"}),c.pos.clone=-a;break;case"left":r.css({marginTop:0,marginLeft:0}),o.css({marginTop:0,marginLeft:l+"px"}),c.pos.clone=l;break;case"right":r.css({marginTop:0,marginLeft:0}),o.css({marginTop:0,marginLeft:-l+"px"}),c.pos.clone=-l}c.auto&&(u(),r.hover(function(){m(c.mainTimer)},function(){u()}),o.hover(function(){m(c.mainTimer)},function(){u()})),t&&t(),c.control&&g()}function d(n){n?(v(c._front).unbind("click"),v(c._back).unbind("click"),v(c._stop).unbind("click"),v(c._continue).unbind("click")):g()}function p(n,t,i){i?(m(c.subTimer),c.pos.object=n,c.pos.clone=t,c.tag=!0):c.tag=!1,c.tag&&(c.convert?b():c.auto||m(c.mainTimer)),"up"!=c.deriction&&"down"!=c.deriction||(r.css({marginTop:n+"px"}),o.css({marginTop:t+"px"})),"left"!=c.deriction&&"right"!=c.deriction||(r.css({marginLeft:n+"px"}),o.css({marginLeft:t+"px"}))}var u=function(n){m(c.mainTimer),c.stay=n||c.stay,c.mainTimer=setInterval(function(){f()},c.stay)},f=function(){m(c.subTimer),c.subTimer=setInterval(function(){h()},c.delay)},m=function(n){null!=n&&clearInterval(n)},g=function(){null!=c._front&&v(c._front).click(function(){v(c._front).addClass(c.disabled),d(!0),m(c.mainTimer),c.convert=!0,c.btn="front",c.auto||(c.tag=!0),b()}),null!=c._back&&v(c._back).click(function(){v(c._back).addClass(c.disabled),d(!0),m(c.mainTimer),c.convert=!0,c.btn="back",c.auto||(c.tag=!0),b()}),null!=c._stop&&v(c._stop).click(function(){m(c.mainTimer)}),null!=c._continue&&v(c._continue).click(function(){u()})},b=function(){c.tag&&c.convert&&(c.convert=!1,"front"==c.btn&&("down"==c.deriction&&(c.deriction="up"),"right"==c.deriction&&(c.deriction="left")),"back"==c.btn&&("up"==c.deriction&&(c.deriction="down"),"left"==c.deriction&&(c.deriction="right")),c.auto?u():u(4*c.delay))},h=function(){var n="up"==c.deriction||"down"==c.deriction?parseInt(r.get(0).style.marginTop):parseInt(r.get(0).style.marginLeft),t="up"==c.deriction||"down"==c.deriction?parseInt(o.get(0).style.marginTop):parseInt(o.get(0).style.marginLeft),i=Math.max(Math.abs(n-c.pos.object),Math.abs(t-c.pos.clone)),e=Math.ceil((s-i)/c.speed);switch(c.deriction){case"up":i==s?(p(n,t,!0),v(c._front).removeClass(c.disabled),d(!1)):(n<=-a&&(n=t+a,c.pos.object=n),t<=-a&&(t=n+a,c.pos.clone=t),p(n-e,t-e));break;case"down":i==s?(p(n,t,!0),v(c._back).removeClass(c.disabled),d(!1)):(a<=n&&(n=t-a,c.pos.object=n),a<=t&&(t=n-a,c.pos.clone=t),p(n+e,t+e));break;case"left":i==s?(p(n,t,!0),v(c._front).removeClass(c.disabled),d(!1)):(n<=-l&&(n=t+l,c.pos.object=n),t<=-l&&(t=n+l,c.pos.clone=t),p(n-e,t-e));break;case"right":i==s?(p(n,t,!0),v(c._back).removeClass(c.disabled),d(!1)):(l<=n&&(n=t-l,c.pos.object=n),l<=t&&(t=n-l,c.pos.clone=t),p(n+e,t+e))}};"up"!=c.deriction&&"down"!=c.deriction||a>=c.height&&a>=c.step&&e(),"left"!=c.deriction&&"right"!=c.deriction||l>=c.width&&l>=c.step&&e()}}(jQuery);